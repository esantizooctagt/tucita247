<ng-container *ngIf="newAppointment$ | async"></ng-container>
<h3 class="pl-3 pr-3 pb-3">Add New Appointment</h3>
<h5 class="pl-3 pr-3 pb-3">{{ (data.appoDate | date: 'MMM, d') + ' ' + data.appoTime.replace('-',':')}}</h5>
<form [formGroup]="clientForm">
    <div class="form-field pl-3 pr-3">
        <mat-form-field hintLabel="Phone number">
            <input matInput #Phone placeholder="+1 (555) 555-1234" appPhoneMask maxlength="17" formControlName="Phone" [errorStateMatcher]="confirmValidParentMatcher">
            <mat-error *ngIf="f.Phone.invalid && f.Phone.touched">{{getErrorMessage('Phone')}}</mat-error>
        </mat-form-field>
    </div>
    <div class="form-field pl-3 pr-3">
        <mat-form-field hintLabel="Name">
            <input matInput #Name placeholder="Name" maxlength="100" minlength="3" formControlName="Name"
                [errorStateMatcher]="confirmValidParentMatcher" required>
            <mat-error *ngIf="f.Name.invalid && f.Name.touched">{{getErrorMessage('Name')}}</mat-error>
        </mat-form-field>
    </div>
    <div class="form-field pl-3 pr-3">
        <mat-form-field hintLabel="Email">
            <input matInput #Email placeholder="Email" maxlength="200" pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" formControlName="Email"
                [errorStateMatcher]="confirmValidParentMatcher">
            <mat-error *ngIf="f.Email.invalid && f.Email.touched">{{getErrorMessage('Email')}}</mat-error>
        </mat-form-field>
    </div>
    <div class="row pl-3 pr-3">
        <div class="form-field pl-3 pr-3 col-md-6">
            <mat-form-field hintLabel="Number of Guests">
                <input matInput #Guests placeholder="Number of Guests" maxlength="2" min="1" max="20" formControlName="Guests"
                    [errorStateMatcher]="confirmValidParentMatcher" required>
                <mat-error *ngIf="f.Guests.invalid && f.Guests.touched">{{getErrorMessage('Guests')}}</mat-error>
            </mat-form-field>
        </div>
        <div class="form-field pl-3 pr-3 col-md-6">
            <mat-form-field hintLabel="Date of birth">
                <mat-label>Date of birth</mat-label>
                <input matInput [matDatepicker]="dobClient" formControlName="DOB">
                <mat-datepicker-toggle matSuffix [for]="dobClient"></mat-datepicker-toggle>
                <mat-datepicker #dobClient></mat-datepicker>
            </mat-form-field>
        </div>
    </div>
    <div class="row pl-3 pr-3">
        <div class="form-field pl-3 pr-3 col-md-6">
            <label>Gender</label>
            <mat-radio-group aria-label="Select an option" formControlName="Gender" class="client_gender mt-0">
                <mat-radio-button matLine value="M">Male</mat-radio-button>
                <mat-radio-button matLine value="F">Female</mat-radio-button>
                <mat-radio-button matLine value="NA">N/A</mat-radio-button>
            </mat-radio-group>
        </div>
        <div class="form-field pl-3 pr-3 col-md-6">
            <label>Priority</label>
            <mat-radio-group aria-label="Select an option" formControlName="Disability" class="client_gender mt-0">
                <mat-radio-button matLine value="1">Senior</mat-radio-button>
                <mat-radio-button matLine value="2">Pregnant</mat-radio-button>
                <mat-radio-button matLine value="3">Disable</mat-radio-button>
            </mat-radio-group>
        </div>
    </div>
    <div class="row pl-3 pr-3">
        <div class="form-field pl-3 pr-3 col-md-6">
            <label>Door</label>
            <mat-form-field>
                <mat-select name="doors" formControlName="Door"> 
                    <mat-option *ngFor="let item of doors" [value]="item">
                        {{item}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="form-field pl-3 pr-3 col-md-6">
            <label>Preference</label>
            <mat-radio-group aria-label="Select an option" formControlName="Preference" class="client_gender mt-0">
                <mat-radio-button matLine value="1">SMS</mat-radio-button>
                <mat-radio-button matLine value="2">Email</mat-radio-button>
                <mat-radio-button matLine value="3">Push Notification</mat-radio-button>
            </mat-radio-group>
        </div>
    </div>
    <div class="row pl-3 pr-3">
        <div class="form-field pl-3 pr-3 col-md">
            <label>Service</label>
            <mat-form-field>
                <ng-container *ngIf="services$ | async"></ng-container>
                <mat-select name="service" formControlName="ServiceId" (selectionChange)="validateService($event)">
                    <mat-option *ngFor="let item of services" [value]="item.ServiceId">
                        {{item.Name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
    </div>
    <!-- {{ clientForm.value | json }} -->
    <div class="ml-3 mr-3 mt-2">
        <button mat-flat-button class="button-appo mr-3" color="primary" type="submit" id="save" [disabled]="!clientForm.valid" (click)="addNewAppo()">Save</button>
        <button mat-flat-button class="button-appo" color="accent" type="button" id="cancel" (click)="onNoClick()">Cancel</button>
    </div>
</form>