<div class="pl-0 pt-1 pb-2 col-md-12 mt-1 mb-1 header-route">
    <h3>POLLS</h3>
</div>
<ng-container *ngIf="poll$ | async"></ng-container>
<ng-container *ngIf="savePoll$ | async"></ng-container>
<div class="row p-0 m-0">
    <mat-card class="col-sm col-md col-lg-7">
        <form [formGroup]="pollForm" (ngSubmit)="onSubmit()" class="mt-4">
            <div class="form-field pl-3 pr-3">
                <mat-form-field hintLabel="Name">
                    <input matInput #Name placeholder="Name" maxlength="100" minlength="3" formControlName="Name"
                        [errorStateMatcher]="confirmValidParentMatcher" required>
                    <mat-error *ngIf="f.Name.invalid && f.Name.touched">{{getErrorMessage('Name')}}</mat-error>
                </mat-form-field>
            </div>
            <div class="form-field pl-3 pr-3">
                <mat-form-field hintLabel="Location">
                    <mat-select formControlName="LocationId">
                        <mat-option *ngFor="let res of locs$ | async" [value]="res.LocationId">
                            {{res.Name}}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="f.LocationId.invalid && f.LocationId.touched">{{getErrorMessage('LocationId')}}
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="form-field pl-3 pr-3">
                <mat-form-field hintLabel="Initial poll date">
                    <mat-label>Choose a Initial date</mat-label>
                    <input matInput formControlName="DatePoll" [min]="minDate" [matDatepicker]="initPicker" required>
                    <mat-datepicker-toggle matSuffix [for]="initPicker">
                    </mat-datepicker-toggle>
                    <mat-datepicker #initPicker></mat-datepicker>
                    <mat-error *ngIf="f.DatePoll.invalid && f.DatePoll.touched">{{getErrorMessage('DatePoll')}}
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="form-field pl-3 pr-3">
                <mat-form-field hintLabel="Final poll date">
                    <mat-label>Choose a Final date</mat-label>
                    <input matInput formControlName="DateFinPoll" [min]="minDate" [matDatepicker]="finPicker">
                    <mat-datepicker-toggle matSuffix [for]="finPicker">
                    </mat-datepicker-toggle>
                    <mat-datepicker #finPicker></mat-datepicker>
                    <mat-error *ngIf="f.DateFinPoll.invalid && f.DateFinPoll.touched">{{getErrorMessage('DateFinPoll')}}
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="row">
                <div class="col-md-1 ml-2">
                    <div class="happy-img"></div>
                    <span class="qty-icon">{{ f.Happy.value }}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-1 ml-2">
                    <div class="neutral-img"></div>
                    <span class="qty-icon">{{ f.Neutral.value }}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-1 ml-2">
                    <div class="angry-img"></div>
                    <span class="qty-icon">{{ f.Angry.value }}</span>
                </div>
            </div>
            <div>
                <button mat-flat-button color="primary" id="save" [disabled]="!pollForm.valid"
                    class="ml-3 mr-3 mt-2">Save</button>
                <button mat-flat-button color="accent" id="cancel" type="button" (click)="onCancel()"
                    class="mt-2">Cancel</button>
            </div>
            <!-- {{ pollForm.value | json }} -->
        </form>
    </mat-card>
</div>