<div class="pl-0 pt-1 pb-2 col-md-12 mt-1 mb-1 header-route">
    <h3>SERVICE PROVIDERS</h3>
</div>
<ng-container *ngIf="provider$ | async"></ng-container>
<ng-container *ngIf="saveProvider$ | async"></ng-container>
<div class="row p-0 m-0">
    <mat-card class="col-sm col-md col-lg-7">
        <form [formGroup]="providerForm" (ngSubmit)="onSubmit()" class="mt-4">
            <div class="form-field pl-3 pr-3">
                <mat-form-field hintLabel="Name">
                    <input matInput #Name placeholder="Name" maxlength="100" minlength="3" formControlName="Name"
                        [errorStateMatcher]="confirmValidParentMatcher" required>
                    <mat-error *ngIf="f.Name.invalid && f.Name.touched">{{getErrorMessage('Name')}}</mat-error>
                </mat-form-field>
            </div>
            <div class="form-field pl-3 pr-3">
                <mat-form-field hintLabel="Location">
                    <mat-select formControlName="LocationId">
                        <mat-option *ngFor="let res of locs$ | async" [value]="res.LocationId">
                            {{res.Name}}
                        </mat-option>
                    </mat-select>
                    <mat-error *ngIf="f.LocationId.invalid && f.LocationId.touched">{{getErrorMessage('LocationId')}}
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="form-field pl-3 pr-3" *ngIf="f.ProviderId.value !=''">
                <ng-container *ngIf="services$ | async"></ng-container>
                <ng-container *ngIf="servProvider$ | async"></ng-container>
                <h5>Select services</h5>
                <mat-selection-list #serv (selectionChange)="onSelectService($event)">
                    <mat-list-option *ngFor="let item of services" [selected]="(item.Selected == 1 ? true : false)" [value]="item.ServiceId">
                        {{item.Name}}
                        <p matLine class="time-service"> {{item.TimeService + ' hr'}} </p>
                    </mat-list-option>
                </mat-selection-list>
            </div>
            <div class="form-field-check ml-3 pr-3"
                *ngIf="providerForm.value.ProviderId !== '' && providerForm.value.ProviderId !== null">
                <mat-checkbox formControlName="Status">Status</mat-checkbox>
            </div>
            <div class="form-field pl-3 pr-3 mt-2">
                <button mat-stroked-button class="col-md-4 mt-2 mb-2" color="secondary" type="button" [routerLink]="['/providerope/2']">Service provider schedule</button>
                <button mat-stroked-button class="col-md-4 mt-2 mb-2 ml-3" color="secondary" type="button" [routerLink]="['/providerdays/2']">Special days</button>
            </div>
            <div>
                <button mat-flat-button color="primary" id="save" [disabled]="!providerForm.valid"
                    class="button-action ml-3 mr-3 mt-2">Save</button>
                <button mat-flat-button color="accent" id="cancel" type="button" (click)="onCancel()"
                    class="button-action mt-2">Cancel</button>
            </div>
        </form>
    </mat-card>
</div>